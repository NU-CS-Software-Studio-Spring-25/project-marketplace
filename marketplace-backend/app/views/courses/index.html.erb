<div class="container mt-4">
  <h1 class="text-center mb-5" style="color: var(--hinge-primary); font-weight: 700;">@course-catalog</h1>
  
  <div class="mb-4 text-center">
    <%= link_to new_course_path, class: "btn-hinge-primary" do %>
      <i class="fa-solid fa-plus me-2"></i>Add New Course
    <% end %>
  </div>

  <!-- Pagination Controls -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div class="text-muted">
      <% if @courses.respond_to?(:total_count) %>
        Showing <%= @courses.offset_value + 1 %> - <%= [@courses.offset_value + @courses.limit_value, @courses.total_count].min %> 
        of <%= @courses.total_count %> courses
      <% else %>
        <%= @courses.count %> courses
      <% end %>
    </div>
    
    <!-- Per-page selector -->
<div class="d-flex align-items-center gap-2">
  <span class="text-muted small">Show:</span>
  <%= link_to request.params.except(:page).merge(per_page: 12), 
      class: "btn btn-sm per-page-btn #{params[:per_page].to_i == 12 || params[:per_page].blank? ? 'active' : 'btn-outline-secondary'}" do %>
    12
  <% end %>
  <%= link_to request.params.except(:page).merge(per_page: 24), 
      class: "btn btn-sm per-page-btn #{params[:per_page].to_i == 24 ? 'active' : 'btn-outline-secondary'}" do %>
    24
  <% end %>
  <%= link_to request.params.except(:page).merge(per_page: 48), 
      class: "btn btn-sm per-page-btn #{params[:per_page].to_i == 48 ? 'active' : 'btn-outline-secondary'}" do %>
    48
  <% end %>
</div>

<style>
  /* Per-page button styling */
  .per-page-btn {
    transition: all 0.3s ease;
    color: var(--hinge-primary);
    border-color: var(--hinge-primary);
  }
  
  .per-page-btn.active {
    background-color: black !important;
    border-color: black !important;
    color: white !important;
  }
  
  .per-page-btn:hover:not(.active) {
    background-color: rgba(0, 0, 0, 0.8);
    border-color: black;
    color: white !important;
  }
  
  .per-page-btn.btn-outline-secondary {
    color: #6c757d;
    border-color: #6c757d;
  }
</style>
  </div>

  <div class="row g-3">
    <% @courses.each do |course| %>
      <div class="">
        <div class="card card-hinge h-100">
          <div class="card-header-hinge">
            <span class="course-number-badge"><%= course.course_number %></span>
            <h3 class="course-title"><%= course.name %></h3>
            
            <% if course.labels.any? %>
              <div>
                <% course.labels.each do |label| %>
                  <span class="badge-hinge"><%= label.display_name %></span>
                <% end %>
              </div>
            <% end %>
          </div>
          
          <div class="card-body-hinge">
            <% if course.description.present? %>
              <p><%= course.description.truncate(100) %></p>
            <% end %>
            
            <div class="d-flex justify-content-between align-items-center mt-3">
              <%= link_to course_path(course), class: "btn-hinge-outline" do %>
                <i class="fa-solid fa-circle-info me-1"></i> Details
              <% end %>
              
              <div class="d-flex gap-3">
                <%= link_to edit_course_path(course), class: "btn btn-outline-secondary" do %>
                  <i class="fa-solid fa-pen-to-square"></i>
                <% end %>
                
                <%= button_to course, method: :delete, class: "btn btn-outline-danger", 
                  form: { data: { turbo_confirm: "Are you sure you want to delete this course?" }, class: "d-inline" } do %>
                  <i class="fa-solid fa-trash"></i>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- No courses message -->
  <% if @courses.empty? %>
    <div class="text-center mt-5">
      <div class="text-muted mb-3">
        <i class="fa-solid fa-book fa-3x"></i>
      </div>
      <h3 class="text-muted">No courses found</h3>
      <p class="text-muted">Start by adding your first course to the catalog.</p>
    </div>
  <% end %>

  <!-- Kaminari Pagination -->
  <% if @courses.respond_to?(:total_pages) && @courses.total_pages > 1 %>
    <nav aria-label="Course pagination" class="mt-4">
      <div class="d-flex justify-content-center">
        <%= paginate @courses, 
            theme: 'bootstrap4',
            nav_class: 'justify-content-center',
            params: { per_page: params[:per_page] } %>
      </div>
    </nav>
  <% end %>
</div>

<style>
/* Custom pagination styling */
.pagination .page-link {
  color: var(--hinge-primary);
  border-color: var(--hinge-primary);
}

.pagination .page-item.active .page-link {
  background-color: black; /* Active background color */
  border-color: var(--hinge-primary);
  color: white !important; /* Active text color */
}

.pagination .page-link:hover {
  background-color: black; /* Hover background color */
  color: white; /* Hover text color */
  border-color: var(--hinge-primary);
}

.btn-hinge-outline.active,
.per-page-btn.active {
  background-color: var(--hinge-primary) !important;
  border-color: var(--hinge-primary) !important;
  color: white !important;
}
</style>
